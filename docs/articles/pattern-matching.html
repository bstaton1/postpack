<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pattern Matching • postpack</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Pattern Matching">
<meta property="og:description" content="postpack">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">postpack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa fas fa-book fa-lg"></span>
     
    Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-file fa-lg"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/feature-overview.html">Feature Overview</a>
    </li>
    <li>
      <a href="../articles/pattern-matching.html">Pattern Matching</a>
    </li>
    <li>
      <a href="../articles/multiple-models.html">Multiple Models</a>
    </li>
    <li>
      <a href="../articles/example-mcmclists.html">Example mcmc.lists</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fas fa fas fa-newspaper fa-lg"></span>
     
    Changelog
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bstaton1/postpack/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="pattern-matching_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Pattern Matching</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bstaton1/postpack/blob/master/vignettes/pattern-matching.Rmd"><code>vignettes/pattern-matching.Rmd</code></a></small>
      <div class="hidden name"><code>pattern-matching.Rmd</code></div>

    </div>

    
    
<p>Flexible manipulation (extraction, summarization, diagnostics) of specific nodes from <code>mcmc.list</code> objects is one of the primary features of ‘postpack’. This flexibility is provided through the use of <strong>regular expressions</strong>. Regular expressions are a method of matching character strings using patterns. As an example, suppose you wished to extract all of the <code>b0</code> parameters from the <code>cjs</code> object, which include <code>b0[1]</code>, <code>b0[2]</code>, <code>b0[3]</code>, <code>b0[4]</code>, and <code>b0[5]</code>. Without regular expressions, you would have to somehow state explictly that you want to extract each of these (perhaps using <code><a href="https://rdrr.io/r/base/paste.html">paste0("b0[", 1:5, "]")</a></code>).</p>
<p>However, with regular expressions, you simply need to find a common feature of the strings you wish to match, and create a pattern that will exclude all strings that do not have that common feature. This capability greatly increases the ease and flexibility of performing tasks on specific nodes. You will need to learn some very basic regular expression syntax to get it to work properly.</p>
<p>Here is a very basic example. Begin by loading ‘postpack’ and the example <code>mcmc.list</code>:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">postpack</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">cjs</span>)</pre></body></html></div>
<p>Next, obtain a basic posterior summary for all nodes that contain the letter <code>"B"</code>:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/post_summ.html">post_summ</a></span>(<span class="no">cjs</span>, <span class="kw">params</span> <span class="kw">=</span> <span class="st">"B"</span>, <span class="kw">digits</span> <span class="kw">=</span> <span class="fl">3</span>)</pre></body></html></div>
<pre><code>##          B0 sig_B0    B1 sig_B1
## mean  1.590  0.844 0.415  0.243
## sd    0.491  0.619 0.213  0.262
## 50%   1.569  0.682 0.397  0.178
## 2.5%  0.551  0.277 0.062  0.006
## 97.5% 2.588  2.439 0.864  0.821</code></pre>
<p>Because all of the node names contain a <code>"B"</code>, they are matched and returned. So if you only wanted <code>sig_B0</code> and <code>sig_B1</code>, you could pass <code>params = "sig"</code> as an argument to the ‘postpack’ function in question, to perform the action for only nodes that contain <code>"sig"</code>:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../reference/diag_plots.html">diag_plots</a></span>(<span class="no">cjs</span>, <span class="kw">params</span> <span class="kw">=</span> <span class="st">"sig"</span>)</pre></body></html></div>
<p><img src="pattern-matching_files/figure-html/unnamed-chunk-4-1.png" width="384" style="display: block; margin: auto;"></p>
<div id="match_params" class="section level2">
<h2 class="hasAnchor">
<a href="#match_params" class="anchor"></a><code>match_params()</code>
</h2>
<p>Pattern matching is driven by the <code><a href="../reference/match_params.html">match_params()</a></code> function (which is essentially a wrapper for <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">stringr::str_detect()</a></code>). Every function in ‘postpack’ that uses a <code>param</code> or <code>params</code> argument passes that argument to <code><a href="../reference/match_params.html">match_params()</a></code> early on their calculations, so understanding the way it works is important.</p>
<p>Suppose you want to summarize the random slope and intercept for year 2 (named <code>"b0[2]"</code> and <code>"b1[2]"</code> in the output). Use <code><a href="../reference/match_params.html">match_params()</a></code> to help you get the right regular expression code by checking what will be matched when you try to subset your output:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"2"</span>)</pre></body></html></div>
<pre><code>## [1] "b0[2]"    "b1[2]"    "SIG[2,1]" "SIG[1,2]" "SIG[2,2]" "p[2]"</code></pre>
<p>All nodes with a <code>"2"</code> would be returned. You could exclude the <code>"SIG"</code> elements using:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"[2]"</span>)</pre></body></html></div>
<pre><code>## [1] "b0[2]" "b1[2]" "p[2]"</code></pre>
</div>
<div id="automatic-escape-of-brackets" class="section level2">
<h2 class="hasAnchor">
<a href="#automatic-escape-of-brackets" class="anchor"></a>Automatic Escape of Brackets</h2>
<p>Users already familiar with regular expressions will see the square brackets (<code><a href="https://rdrr.io/r/base/Extract.html">"["</a></code> and <code>"]"</code>) as special characters and may be confused why this works. When using regular expressions, normally <code><a href="https://rdrr.io/r/base/Extract.html">"["</a></code> and <code>"]"</code> have a special meaning and users would need to escape them (i.e., <code>"\\["</code> and <code>"\\]"</code>) to allow them to be matched as plain text. However, because <code><a href="https://rdrr.io/r/base/Extract.html">"["</a></code> and <code>"]"</code> are frequently part of node names and users will wish to use them in pattern matching more frequently than as special characters, ‘postpack’ automatically escapes <code><a href="https://rdrr.io/r/base/Extract.html">"["</a></code> and <code>"]"</code> if they are not already escaped.</p>
<p>If you do not wish to automatically escape <code><a href="https://rdrr.io/r/base/Extract.html">"["</a></code> and <code>"]"</code> to allow a regular expression where brackets serve as special characters like <code>"[:alnum:]"</code>, you <strong>must</strong> include the <code>auto_escape = FALSE</code> argument:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"[:alnum:]"</span>, <span class="kw">auto_escape</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<pre><code>##  [1] "B0"       "sig_B0"   "B1"       "sig_B1"   "b0[1]"    "b0[2]"   
##  [7] "b0[3]"    "b0[4]"    "b0[5]"    "b1[1]"    "b1[2]"    "b1[3]"   
## [13] "b1[4]"    "b1[5]"    "SIG[1,1]" "SIG[2,1]" "SIG[1,2]" "SIG[2,2]"
## [19] "p[2]"     "p[3]"     "p[4]"</code></pre>
<p>If you then also wish to match a <code><a href="https://rdrr.io/r/base/Extract.html">"["</a></code> as plain text in the same regular expression, you can explicitly escape it:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"[:alnum:]\\["</span>, <span class="kw">auto_escape</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<pre><code>##  [1] "b0[1]"    "b0[2]"    "b0[3]"    "b0[4]"    "b0[5]"    "b1[1]"   
##  [7] "b1[2]"    "b1[3]"    "b1[4]"    "b1[5]"    "SIG[1,1]" "SIG[2,1]"
## [13] "SIG[1,2]" "SIG[2,2]" "p[2]"     "p[3]"     "p[4]"</code></pre>
<p>All functions that accept either <code>param</code> or <code>params</code> argument also accept the <code>auto_escape</code> argument, and it is always <code>TRUE</code> by default. For what it is worth, I have only rarely used this feature, but chose to include it to allow complete regular expression capabilities.</p>
</div>
<div id="wild-cards" class="section level2">
<h2 class="hasAnchor">
<a href="#wild-cards" class="anchor"></a>Wild Cards</h2>
<p>With that out of the way, now further refine the regular expression to exclude the <code>p[2]</code> node from the output:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"b.[2]"</span>)</pre></body></html></div>
<pre><code>## [1] "b0[2]" "b1[2]"</code></pre>
<p>The <code>"."</code> serves as a wild card, which says match any one character. If you would have supplied simply <code>"b[2]"</code>, you would get an error:</p>
<pre><code>## Error: 
##   Supplied value(s) of params ("b[2]") did not have any matches in the nodes stored in post.
##   All elements of params must have at least one match.
##   The base names of all monitored nodes are:
##     "B0", "sig_B0", "B1", "sig_B1", 
##     "b0", "b1", "SIG", and "p"</code></pre>
<p>Which is what will happen when any element supplied to <code>params</code> does not match one of the node names stored in the output. The wild card is necessary to specify that some character (here a <code>"0"</code> or a <code>"1"</code>) falls between the <code>"b"</code> and the <code><a href="https://rdrr.io/r/base/Extract.html">"["</a></code> characters in your desired match. You can now pass <code>"b.[2]"</code> to <code><a href="../reference/post_summ.html">post_summ()</a></code> with confidence knowing that only the two coefficients you want will be returned:</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="../reference/post_summ.html">post_summ</a></span>(<span class="no">cjs</span>, <span class="st">"b.[2]"</span>, <span class="kw">digits</span> <span class="kw">=</span> <span class="fl">3</span>)</pre></body></html></div>
<pre><code>##       b0[2] b1[2]
## mean  2.319 0.423
## sd    0.356 0.218
## 50%   2.278 0.403
## 2.5%  1.784 0.046
## 97.5% 3.163 0.916</code></pre>
<p><strong>NOTE</strong>: Because <code>"."</code> is a special character (a wild card), if you wish to match it as plain text, you <strong>must</strong> escape it. For example if you have both nodes <code>"a.b"</code> and <code>"a_b"</code> in your <code>mcmc.list</code> object <code>x</code>, running <code><a href="../reference/match_params.html">match_params(x, "a.b")</a></code> will match both <code>"a.b"</code> and <code>"a_b"</code>. If you want only <code>"a.b"</code>, you must run <code><a href="../reference/match_params.html">match_params(x, "a\\.b")</a></code></p>
</div>
<div id="anchors" class="section level2">
<h2 class="hasAnchor">
<a href="#anchors" class="anchor"></a>Anchors</h2>
<p>As another example, instead of accessing all nodes that contain <code>"B"</code> in their name, suppose you wish to only extract those that contain <code>"B"</code> as the first character. You can force your match to start with certain patterns using the <code><a href="https://rdrr.io/r/base/Arithmetic.html">"^"</a></code> symbol:</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"^B"</span>)</pre></body></html></div>
<pre><code>## [1] "B0" "B1"</code></pre>
<p>Likewise, you could extract only nodes that end with <code>"0"</code> using the <code><a href="https://rdrr.io/r/base/Extract.html">"$"</a></code> symbol:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"0$"</span>)</pre></body></html></div>
<pre><code>## [1] "B0"     "sig_B0"</code></pre>
<p>Note that no elements of <code>"b0"</code> are returned, because these nodes end with <code>"]"</code> (e.g., <code>"b0[1]"</code>).</p>
</div>
<div id="repetition" class="section level2">
<h2 class="hasAnchor">
<a href="#repetition" class="anchor"></a>Repetition</h2>
<p>You can repeat a wild card or some other character one or more times using the <code><a href="https://rdrr.io/r/base/Arithmetic.html">"+"</a></code> symbol:</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="../reference/match_params.html">match_params</a></span>(<span class="no">cjs</span>, <span class="st">"^s.+0$"</span>)</pre></body></html></div>
<pre><code>## [1] "sig_B0"</code></pre>
<p>Which forces the match to start with an <code>"s"</code>, end with a <code>"0"</code>, and have anything in between.</p>
</div>
<div id="more-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#more-resources" class="anchor"></a>More resources</h2>
<p>Because <code><a href="../reference/match_params.html">match_params()</a></code> is a wrapper for <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">stringr::str_detect()</a></code>, most everything that works there will also with with ‘postpack’. There is a comprehensive description of all regular expression syntax accepted by ‘stringr’ <a href="https://stringr.tidyverse.org/articles/regular-expressions.html">here</a> (also accessible in R using <code><a href="https://stringr.tidyverse.org/articles/regular-expressions.html">vignette("regular-expressions", package = "stringr")</a></code>).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ben Staton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
